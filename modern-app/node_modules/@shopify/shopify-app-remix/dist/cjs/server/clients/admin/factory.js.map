{"version":3,"file":"factory.js","sources":["../../../../../../src/server/clients/admin/factory.ts"],"sourcesContent":["import {Session, ShopifyRestResources} from '@shopify/shopify-api';\n\nimport type {AppConfigArg} from '../../config-types';\nimport {BasicParams} from '../../types';\n\nimport {graphqlClientFactory} from './graphql';\nimport {restClientFactory} from './rest';\nimport type {AdminApiContext} from './types';\n\ninterface RestClientOptions {\n  params: BasicParams;\n  session: Session;\n  handleClientError?: (error: any) => Promise<void>;\n}\n\nexport function adminClientFactory<\n  ConfigArg extends AppConfigArg,\n  Resources extends ShopifyRestResources = ShopifyRestResources,\n>({\n  params,\n  handleClientError,\n  session,\n}: RestClientOptions): AdminApiContext<ConfigArg, Resources> {\n  if (params.config.future.removeRest) {\n    return {\n      graphql: graphqlClientFactory({params, session, handleClientError}),\n    } as AdminApiContext<ConfigArg, Resources>;\n  }\n\n  return {\n    rest: restClientFactory<Resources>({\n      params,\n      session,\n      handleClientError,\n    }),\n    graphql: graphqlClientFactory({params, session, handleClientError}),\n  } as AdminApiContext<ConfigArg, Resources>;\n}\n"],"names":["graphqlClientFactory","restClientFactory"],"mappings":";;;;;AAeM,SAAU,kBAAkB,CAGhC,EACA,MAAM,EACN,iBAAiB,EACjB,OAAO,GACW,EAAA;IAClB,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE;QACnC,OAAO;YACL,OAAO,EAAEA,4BAAoB,CAAC,EAAC,MAAM,EAAE,OAAO,EAAE,iBAAiB,EAAC,CAAC;SAC3B;IAC5C;IAEA,OAAO;QACL,IAAI,EAAEC,sBAAiB,CAAY;YACjC,MAAM;YACN,OAAO;YACP,iBAAiB;SAClB,CAAC;QACF,OAAO,EAAED,4BAAoB,CAAC,EAAC,MAAM,EAAE,OAAO,EAAE,iBAAiB,EAAC,CAAC;KAC3B;AAC5C;;;;"}
{"version":3,"file":"redirect-to-shopify-or-app-root.js","sources":["../../../../../../../src/server/authenticate/admin/helpers/redirect-to-shopify-or-app-root.ts"],"sourcesContent":["import {redirect} from '@remix-run/server-runtime';\n\nimport type {BasicParams} from '../../../types';\n\nexport async function redirectToShopifyOrAppRoot(\n  request: Request,\n  params: BasicParams,\n  responseHeaders?: Headers,\n): Promise<never> {\n  const {api} = params;\n  const url = new URL(request.url);\n\n  const host = api.utils.sanitizeHost(url.searchParams.get('host')!)!;\n  const shop = api.utils.sanitizeShop(url.searchParams.get('shop')!)!;\n\n  const redirectUrl = api.config.isEmbeddedApp\n    ? await api.auth.getEmbeddedAppUrl({rawRequest: request})\n    : `/?shop=${shop}&host=${encodeURIComponent(host)}`;\n\n  throw redirect(redirectUrl, {headers: responseHeaders});\n}\n"],"names":["redirect"],"mappings":";;;;AAIO,eAAe,0BAA0B,CAC9C,OAAgB,EAChB,MAAmB,EACnB,eAAyB,EAAA;AAEzB,IAAA,MAAM,EAAC,GAAG,EAAC,GAAG,MAAM;IACpB,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC;AAEhC,IAAA,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAE,CAAE;AACnE,IAAA,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAE,CAAE;AAEnE,IAAA,MAAM,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC;AAC7B,UAAE,MAAM,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAC,UAAU,EAAE,OAAO,EAAC;UACtD,UAAU,IAAI,CAAA,MAAA,EAAS,kBAAkB,CAAC,IAAI,CAAC,CAAA,CAAE;IAErD,MAAMA,sBAAQ,CAAC,WAAW,EAAE,EAAC,OAAO,EAAE,eAAe,EAAC,CAAC;AACzD;;;;"}